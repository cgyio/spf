<template>
    <svg 
        :class="styComputedClassStr.root" 
        :style="styComputedStyleStr.root"
        aria-hidden="true"
    >
        <use v-if="icon!='-empty-'" v-bind:xlink:href="'#'+iconKey">
            <animateTransform
                v-if="spin"
                attributeName="transform"
                attributeType="XML"
                type="rotate"
                :from="'0'+spinCenter"
                :to="'360'+spinCenter"
                :dur="spinDura"
                repeatCount="indefinite" />
        </use>
    </svg>
</template>

<script>
import mixinBase from '../../mixin/base';

export default {
    mixins: [mixinBase],
    props: {
        //图标名称，来自加载的图标包，在 cssvar 中指定
        //指定为 -empty- 则显示一个空图标，占据相应尺寸，不显示任何图标
        icon: {
            type: String,
            default: '-empty-'
        },

        //spin
        spin: {
            type: Boolean,
            default: false
        },

        //spin dura
        spinDura: {
            type: String,
            default: '2s'
        },

        //使用外部 icon 图标，不通过自带 iconPackage 图标包
        //图标来源 https://io.cgy.design/icon/***
        /*useExtraIcon: {
            type: Boolean,
            default: false
        },
        extraIconApi: {
            type: String,
            default: 'https://io.cgy.design/icon/'
        },*/
    },
    data() {return {
            
        /**
         * 覆盖 base-style 样式系统参数
         */
        styInit: {
            class: {
                //根元素
                root: ['__PRE__-icon-wrapper'],
            },
            style: {
                //根元素
                root: {},
            },
        },
        styCssPre: 'icon',
        styEnable: {
            size: true,
            color: true,
            animate: false,
        },
        stySwitches: {
            
        },
        styCsvKey: {
            size: 'icon',
            color: 'fc',
        },
        
    }},
    computed: {

        /**
         * icon
         */
        iconKey() {
            if (this.icon=='-empty-') return '-empty-';
            //if (this.spin) return 'spiner-180-ring';
            return this.icon;
        },

        /**
         * spin
         */
        //计算 spin 中心坐标
        spinCenter() {
            let fsz = this.sizePropVal,
                fsarr = this.sizeToArr(fsz),
                fszn = fsarr[0],
                r = fszn/2;
            return ` ${r} ${r}`;
        },
    },
    methods: {

    }
}
</script>

<style>

</style>